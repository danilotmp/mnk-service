{
  "info": {
    "name": "MNK Service API",
    "description": "Colecci√≥n completa de endpoints para la API MNK Service - Backend multiempresa con DDD + Hexagonal Architecture, autorizaci√≥n y men√∫ din√°mico. Incluye arquitectura de 3 niveles: Contexto (sin permisos) y Administrativo (con permisos).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "mnk-service-001"
  },
  "item": [
    {
      "name": "Autenticaci√≥n",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"accessToken\", jsonData.data.accessToken);",
                  "    pm.collectionVariables.set(\"refreshToken\", jsonData.data.refreshToken);",
                  "    pm.collectionVariables.set(\"userId\", jsonData.data.user.id);",
                  "    ",
                  "    // Guardar companyId y branchId si existen",
                  "    if (jsonData.data.user.companyId) {",
                  "        pm.collectionVariables.set(\"companyId\", jsonData.data.user.companyId);",
                  "    }",
                  "    if (jsonData.data.user.currentBranchId) {",
                  "        pm.collectionVariables.set(\"branchId\", jsonData.data.user.currentBranchId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "description": "Idioma: es, en, pt"
              },
              {
                "key": "company-code",
                "value": "MNK",
                "description": "C√≥digo de la empresa (multiempresa)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@mnksolutions.com\",\n  \"password\": \"Admin123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "auth", "login"]
            },
            "description": "Iniciar sesi√≥n y obtener tokens JWT\n\n**‚≠ê NUEVO: Response Mejorado**\nAhora incluye:\n- Informaci√≥n completa de la empresa\n- Lista de sucursales disponibles\n- Contexto completo del usuario\n\n**Credenciales de Prueba:**\n- Admin: admin@mnksolutions.com / Admin123!\n- Usuario: test@mnksolutions.com / Test123!"
          },
          "response": []
        },
        {
          "name": "Registro",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data.accessToken) {",
                  "        pm.collectionVariables.set(\"accessToken\", jsonData.data.accessToken);",
                  "        pm.collectionVariables.set(\"refreshToken\", jsonData.data.refreshToken);",
                  "        pm.collectionVariables.set(\"userId\", jsonData.data.user.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nuevo@mnksolutions.com\",\n  \"password\": \"Password123!\",\n  \"firstName\": \"Juan\",\n  \"lastName\": \"P√©rez\",\n  \"companyId\": \"uuid-de-empresa\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "auth", "register"]
            },
            "description": "Registrar nuevo usuario"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/auth/refresh-token",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "auth", "refresh-token"]
            },
            "description": "Refrescar token de acceso usando refresh token"
          },
          "response": []
        },
        {
          "name": "Obtener Perfil",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              },
              {
                "key": "user-id",
                "value": "{{userId}}"
              },
              {
                "key": "app-source",
                "value": "mobile"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "profile"]
            },
            "description": "Obtener perfil del usuario autenticado (requiere token)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üÜï Contexto del Usuario (Sin Permisos)",
      "description": "Endpoints para que el usuario acceda a SU contexto sin necesidad de permisos administrativos. Solo requiere JWT v√°lido.",
      "item": [
        {
          "name": "Mis Empresas",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me/companies",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me", "companies"]
            },
            "description": "Obtener las empresas a las que tengo acceso.\n\n‚úÖ **No requiere permisos administrativos** - Solo JWT v√°lido.\n\nDevuelve un array de empresas disponibles para el usuario autenticado."
          },
          "response": []
        },
        {
          "name": "Mi Empresa por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me/companies/{{companyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me", "companies", "{{companyId}}"]
            },
            "description": "Obtener detalles de UNA de mis empresas.\n\n**Validaci√≥n**: Solo puedo ver empresas a las que tengo acceso.\n\n‚úÖ **No requiere permisos administrativos** - Solo JWT v√°lido."
          },
          "response": []
        },
        {
          "name": "Mis Sucursales",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me/branches",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me", "branches"]
            },
            "description": "Obtener las sucursales de MI empresa.\n\n**Uso t√≠pico**: Llenar dropdown de sucursales para cambio de contexto.\n\n‚úÖ **No requiere permisos administrativos** - Solo JWT v√°lido."
          },
          "response": []
        },
        {
          "name": "Mi Sucursal por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me/branches/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me", "branches", "{{branchId}}"]
            },
            "description": "Obtener detalles de UNA de mis sucursales.\n\n**Validaci√≥n**: Solo puedo ver sucursales de mi empresa.\n\n‚úÖ **No requiere permisos administrativos** - Solo JWT v√°lido."
          },
          "response": []
        },
        {
          "name": "Cambiar Sucursal Activa",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"branchId\": \"{{branchId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/me/switch-branch",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me", "switch-branch"]
            },
            "description": "Cambiar mi contexto de sucursal actual.\n\n**Uso t√≠pico**: Cuando usuario selecciona otra sucursal en el dropdown.\n\n**Validaci√≥n**: Solo puedo cambiar a sucursales de mi empresa.\n\n‚úÖ **No requiere permisos administrativos** - Solo JWT v√°lido."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Usuarios",
      "item": [
        {
          "name": "Listar Usuarios (Paginado)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "N√∫mero de p√°gina (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Elementos por p√°gina (default: 10, max: 100)"
                },
                {
                  "key": "companyId",
                  "value": "",
                  "description": "Filtrar por empresa (opcional)",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "",
                  "description": "Filtrar por estado activo (opcional)",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "B√∫squeda global en email, nombre y apellido (opcional)",
                  "disabled": true
                }
              ]
            },
            "description": "Obtener lista paginada de usuarios con filtros opcionales"
          },
          "response": []
        },
        {
          "name": "Obtener Usuario por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{userId}}",
                  "description": "ID del usuario (UUID)"
                }
              ]
            },
            "description": "Obtener un usuario espec√≠fico por ID"
          },
          "response": []
        },
        {
          "name": "Crear Usuario",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nuevo@mnksolutions.com\",\n  \"password\": \"Password123!\",\n  \"firstName\": \"Juan\",\n  \"lastName\": \"P√©rez\",\n  \"companyId\": \"{{companyId}}\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios"]
            },
            "description": "Crear un nuevo usuario"
          },
          "response": []
        },
        {
          "name": "Actualizar Usuario",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Juan Actualizado\",\n  \"lastName\": \"P√©rez Actualizado\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{userId}}",
                  "description": "ID del usuario (UUID)"
                }
              ]
            },
            "description": "Actualizar un usuario existente"
          },
          "response": []
        },
        {
          "name": "Eliminar Usuario",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{userId}}",
                  "description": "ID del usuario (UUID)"
                }
              ]
            },
            "description": "Eliminar un usuario (soft delete)"
          },
          "response": []
        },
        {
          "name": "‚≠ê Actualizar Usuario Completo (TODO-EN-UNO)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Juan Actualizado\",\n  \"lastName\": \"P√©rez Actualizado\",\n  \"email\": \"usuario-actualizado@empresa.com\",\n  \"isActive\": true,\n  \"roleId\": \"{{roleId}}\",\n  \"branchIds\": [\"{{branchId}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios/{{userId}}/completo",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios", "{{userId}}", "completo"]
            },
            "description": "‚≠ê **Endpoint TODO-EN-UNO** para formularios de edici√≥n.\n\n**UNA sola llamada actualiza:**\n‚úÖ Datos b√°sicos (nombre, apellido, email, etc)\n‚úÖ Rol principal del usuario\n‚úÖ Sucursales disponibles\n\n**Uso t√≠pico**: Formulario de edici√≥n de usuarios.\n\n**Ventaja**: Frontend hace 1 sola llamada en lugar de 3.\n\n**Campos opcionales**: Env√≠a solo lo que necesitas actualizar."
          },
          "response": []
        },
        {
          "name": "Ver Roles del Usuario",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios/{{userId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios", "{{userId}}", "roles"]
            },
            "description": "Obtener la lista de roles asignados a un usuario.\n\n**Response incluye:**\n- ID y nombre del rol\n- Fecha de asignaci√≥n\n- Estado activo\n\n**Requiere permiso:** users.view"
          },
          "response": []
        },
        {
          "name": "Ver Sucursales del Usuario",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/usuarios/{{userId}}/sucursales",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "usuarios", "{{userId}}", "sucursales"]
            },
            "description": "Obtener las sucursales disponibles para un usuario.\n\n**Response incluye:**\n- Sucursal actual (currentBranchId)\n- Lista de sucursales disponibles\n\n**Requiere permiso:** users.view"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Roles",
      "item": [
        {
          "name": "Listar Roles (Paginado)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/roles?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "roles"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "N√∫mero de p√°gina (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Elementos por p√°gina (default: 10, max: 100)"
                },
                {
                  "key": "companyId",
                  "value": "",
                  "description": "Filtrar por empresa (opcional)",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "",
                  "description": "Filtrar por estado activo (opcional)",
                  "disabled": true
                },
                {
                  "key": "searchTerm",
                  "value": "",
                  "description": "B√∫squeda en name, displayName y description (opcional)",
                  "disabled": true
                }
              ]
            },
            "description": "Obtener lista paginada de roles con filtros opcionales"
          },
          "response": []
        },
        {
          "name": "Obtener Rol por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/roles/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "roles", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "uuid-del-rol",
                  "description": "ID del rol (UUID)"
                }
              ]
            },
            "description": "Obtener un rol espec√≠fico por ID"
          },
          "response": []
        },
        {
          "name": "Crear Rol",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"companyId\": \"{{companyId}}\",\n  \"name\": \"editor\",\n  \"displayName\": \"Editor\",\n  \"description\": \"Rol de editor con permisos limitados\",\n  \"isActive\": true,\n  \"isSystem\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/roles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "roles"]
            },
            "description": "Crear un nuevo rol"
          },
          "response": []
        },
        {
          "name": "Actualizar Rol",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"displayName\": \"Editor Actualizado\",\n  \"description\": \"Descripci√≥n actualizada\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/roles/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "roles", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "uuid-del-rol",
                  "description": "ID del rol (UUID)"
                }
              ]
            },
            "description": "Actualizar un rol existente"
          },
          "response": []
        },
        {
          "name": "Eliminar Rol",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/roles/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "roles", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "uuid-del-rol",
                  "description": "ID del rol (UUID)"
                }
              ]
            },
            "description": "Eliminar un rol (soft delete). No se pueden eliminar roles del sistema."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Permisos",
      "item": [
        {
          "name": "Listar Permisos (Paginado)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/permisos?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "permisos"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "N√∫mero de p√°gina (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Elementos por p√°gina (default: 10, max: 100)"
                },
                {
                  "key": "type",
                  "value": "",
                  "description": "Filtrar por tipo: PAGE o ACTION (opcional)",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "",
                  "description": "Filtrar por estado activo (opcional)",
                  "disabled": true
                },
                {
                  "key": "searchTerm",
                  "value": "",
                  "description": "B√∫squeda en code, name y description (opcional)",
                  "disabled": true
                }
              ]
            },
            "description": "Obtener lista paginada de permisos con filtros opcionales"
          },
          "response": []
        },
        {
          "name": "Obtener Permiso por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/permisos/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "permisos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "uuid-del-permiso",
                  "description": "ID del permiso (UUID)"
                }
              ]
            },
            "description": "Obtener un permiso espec√≠fico por ID"
          },
          "response": []
        },
        {
          "name": "Crear Permiso",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"users.export\",\n  \"name\": \"Exportar usuarios\",\n  \"type\": \"ACTION\",\n  \"resource\": \"users\",\n  \"action\": \"export\",\n  \"description\": \"Permite exportar usuarios a Excel/CSV\",\n  \"isActive\": true,\n  \"isSystem\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/permisos",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "permisos"]
            },
            "description": "Crear un nuevo permiso"
          },
          "response": []
        },
        {
          "name": "Actualizar Permiso",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Exportar usuarios (Actualizado)\",\n  \"description\": \"Descripci√≥n actualizada\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/permisos/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "permisos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "uuid-del-permiso",
                  "description": "ID del permiso (UUID)"
                }
              ]
            },
            "description": "Actualizar un permiso existente"
          },
          "response": []
        },
        {
          "name": "Eliminar Permiso",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/permisos/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "permisos", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "uuid-del-permiso",
                  "description": "ID del permiso (UUID)"
                }
              ]
            },
            "description": "Eliminar un permiso (soft delete). No se pueden eliminar permisos del sistema."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Men√∫",
      "item": [
        {
          "name": "Obtener Men√∫",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "Token JWT obligatorio - El roleId se obtiene del token del usuario autenticado"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "description": "Idioma: es, en, pt"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/menu",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "menu"]
            },
            "description": "Obtener men√∫ privado seg√∫n permisos del usuario autenticado\n\n**Comportamiento:**\n- **Requiere token JWT v√°lido** (autenticaci√≥n obligatoria)\n- **Obtiene el userId del token** autom√°ticamente\n- **Combina permisos de todos los roles activos** del usuario\n- Devuelve solo items privados seg√∫n permisos del usuario\n- Los items p√∫blicos son manejados por el frontend\n\n**Respuesta:**\n- Si el usuario tiene permisos: devuelve array de items del men√∫\n- Si el usuario no tiene permisos: devuelve array vac√≠o con alerta en `details`\n\n**Nota:** Ya no se requiere el par√°metro `roleId` en la URL. El sistema obtiene autom√°ticamente los permisos del usuario desde su token."
          },
          "response": []
        },
        {
          "name": "Validar acceso puntual",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "description": "Idioma: es, en, pt"
              },
              {
                "key": "company-code",
                "value": "MNK"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/access?route=/security/users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "access"],
              "query": [
                {
                  "key": "route",
                  "value": "/security/users",
                  "description": "Ruta del frontend a validar"
                }
              ]
            },
            "description": "Valida si el usuario autenticado puede acceder a la ruta especificada. Devuelve 200 cuando tiene permiso y 403 cuando no est√° autorizado."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üîê ADMIN - Empresas (Con Permisos)",
      "description": "Endpoints administrativos para gestionar empresas. Requiere permisos espec√≠ficos.",
      "item": [
        {
          "name": "Listar Todas las Empresas (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/empresas?page=1&limit=10&search=&isActive=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "empresas"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "N√∫mero de p√°gina"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Elementos por p√°gina"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "B√∫squeda global (c√≥digo, nombre, email)"
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "description": "Filtrar por estado activo"
                },
                {
                  "key": "code",
                  "value": "",
                  "description": "Filtro espec√≠fico por c√≥digo",
                  "disabled": true
                },
                {
                  "key": "name",
                  "value": "",
                  "description": "Filtro espec√≠fico por nombre",
                  "disabled": true
                }
              ]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: companies.view**\n\nListar TODAS las empresas del sistema (vista administrativa)."
          },
          "response": []
        },
        {
          "name": "Ver Empresa por ID (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/empresas/{{companyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "empresas", "{{companyId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: companies.view**\n\nVer cualquier empresa del sistema."
          },
          "response": []
        },
        {
          "name": "Crear Empresa (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"NEWCOMP\",\n  \"name\": \"Nueva Empresa S.A.\",\n  \"description\": \"Empresa de servicios tecnol√≥gicos\",\n  \"email\": \"contacto@nuevaempresa.com\",\n  \"phone\": \"+593987654321\",\n  \"address\": {\n    \"street\": \"Av. Principal 123\",\n    \"city\": \"Quito\",\n    \"country\": \"Ecuador\"\n  },\n  \"settings\": {\n    \"timezone\": \"America/Guayaquil\",\n    \"currency\": \"USD\"\n  },\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/empresas",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "empresas"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: companies.create**\n\nCrear nueva empresa en el sistema."
          },
          "response": []
        },
        {
          "name": "Actualizar Empresa (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Empresa Actualizada S.A.\",\n  \"email\": \"nuevo-contacto@empresa.com\",\n  \"description\": \"Descripci√≥n actualizada\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/empresas/{{companyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "empresas", "{{companyId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: companies.edit**\n\nActualizar cualquier empresa del sistema."
          },
          "response": []
        },
        {
          "name": "Eliminar Empresa (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/empresas/{{companyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "empresas", "{{companyId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: companies.delete**\n\nEliminar empresa (soft delete - marca como inactiva)."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üîê ADMIN - Sucursales (Con Permisos)",
      "description": "Endpoints administrativos para gestionar sucursales. Requiere permisos espec√≠ficos.",
      "item": [
        {
          "name": "Listar Todas las Sucursales (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/sucursales?page=1&limit=10&companyId=&search=&isActive=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "sucursales"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "N√∫mero de p√°gina"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Elementos por p√°gina"
                },
                {
                  "key": "companyId",
                  "value": "",
                  "description": "UUID de la empresa (opcional)"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "B√∫squeda global (c√≥digo, nombre)"
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "description": "Filtrar por estado activo"
                },
                {
                  "key": "type",
                  "value": "",
                  "description": "Tipo: headquarters, branch, warehouse, store",
                  "disabled": true
                }
              ]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: branches.view**\n\nListar TODAS las sucursales del sistema (vista administrativa)."
          },
          "response": []
        },
        {
          "name": "Sucursales de Empresa (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/sucursales/empresa/{{companyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "sucursales", "empresa", "{{companyId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: branches.view**\n\nVer todas las sucursales de cualquier empresa (vista administrativa)."
          },
          "response": []
        },
        {
          "name": "Ver Sucursal por ID (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/sucursales/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "sucursales", "{{branchId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: branches.view**\n\nVer cualquier sucursal del sistema."
          },
          "response": []
        },
        {
          "name": "Crear Sucursal (Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"companyId\": \"{{companyId}}\",\n  \"code\": \"NEWSUC\",\n  \"name\": \"Nueva Sucursal\",\n  \"type\": \"branch\",\n  \"address\": {\n    \"street\": \"Av. Central 456\",\n    \"city\": \"Guayaquil\",\n    \"country\": \"Ecuador\"\n  },\n  \"contactInfo\": {\n    \"phone\": \"0987654321\",\n    \"email\": \"sucursal@empresa.com\"\n  },\n  \"settings\": {\n    \"openHours\": \"08:00-18:00\",\n    \"maxCapacity\": 100\n  },\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/sucursales",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "sucursales"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: branches.create**\n\nCrear nueva sucursal en el sistema."
          },
          "response": []
        },
        {
          "name": "Actualizar Sucursal (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Sucursal Actualizada\",\n  \"type\": \"headquarters\",\n  \"contactInfo\": {\n    \"phone\": \"0999999999\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/sucursales/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "sucursales", "{{branchId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: branches.edit**\n\nActualizar cualquier sucursal del sistema."
          },
          "response": []
        },
        {
          "name": "Eliminar Sucursal (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "type": "text"
              },
              {
                "key": "Accept-Language",
                "value": "es",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/seguridades/admin/sucursales/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "seguridades", "admin", "sucursales", "{{branchId}}"]
            },
            "description": "‚ö†Ô∏è **Requiere permiso: branches.delete**\n\nEliminar sucursal (soft delete - marca como inactiva)."
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "companyId",
      "value": "",
      "type": "string"
    },
    {
      "key": "branchId",
      "value": "",
      "type": "string"
    },
    {
      "key": "roleId",
      "value": "",
      "type": "string"
    }
  ]
}
